# Clear everything on Cloud.
 
#### See PURGE notes below

# Rebuild & Test completely
 
Create a new project from Scratch:	EventBridge-Analysis-V6

Create an empty folder:	EventBridge-Analysis-v6

Open VSCode:		do this in the empty project folder.

VSCode  Command Pallet ( shift - ⌘ - P ) -> AWS: Create Lambda SAM Application

	Runtime -------------------------- nodejs20.x
	Architecture --------------------- x86_64
	Application Template ------------- AWS SAM Hello World (basic SAM app)
	Folder for new SAM application --- EventBridge-Analysis-V5 (default)
	Name of new Application ---------- lambda-nodejs20.x (default)


The results is a file structure that has this folder structure:
EventBridge-Analysis-V6<br>
--- .vscode<br>
--- --- launch.json<br>
--- lambda-nodejs20x<br>
--- --- .gitignore<br>
--- --- events/...<br>
--- --- hellow-world/...<br>
--- --- README.md<br>
--- --- README.TOOLKIT.ms<br>
--- --- samconfig.toml<br>
--- --- template.yaml<br>
 

### Make these changes:

Move all of the code in ‘lambda-nodejs20x’ up one-level and discard lambda-nodejs20x

Update the path references in launch.json
* (2x places) "templatePath": "${workspaceFolder}/template.yaml",

Update 2x files that reference “lambda-nodejs20x” path.

---
**template.yaml**

Modify description. This causes no functional change.

---
**samconfig.toml**
```yaml
[default.global.parameters]
## EDIT
stack_name = "eb-analysis-v6-stack"
## ADD
s3_prefix = "eb-analysis-v5-stack"
region = "us-east-1"
resolve_s3 = true

[default.deploy.parameters]
capabilities = "CAPABILITY_IAM"
confirm_changeset = true
resolve_s3 = true
## ADD
stack_name = "eb-analysis-v6-stack"
region = "us-east-1"
resolve_s3 = true
```

# Run AWS: Sync SAM


VSCode -> Command Pallet ( shift - ⌘ - P ) -> AWS: Sync SAM Application (formerly Deploy)
```
	Region	us-east-1 ( default )
	Template	template.yaml ( default )
	Stack	eb-analysis-v6-stack ( first time input then default )
	S3 Bucket	eb-analysis-v6-bucket ( first time input then default )
```

# Verify changes generated by AWS: Sync SAM
 
Cloud
* The new Lambda is added.
* Logs are generated

Local -- NOTE: Docker must be running.
* JOY

Browser
* JOY


# Add second Lambda function

Modify code is both Lambdas.

# Run -- AWS: Sync SAM

# VERIFY AWS Sync SAM

Cloud
* The new Lambda is added.
* Logs are generated

Local
* JOY

Browser
* JOY
 

# OTPIONAL: Build project with 'sam build' and 'sam deploy'

Don't make any changes; Just run.
 
### OBSERVATION

Build & Deploy created a new S3 Bucket.<br>
-- aws-sam-cli-managed-default-samclisourcebucket-g9n9x1gklj76

The bucket contains a folder:<br>
-- eb-analysis-v6-stack

In the folder are a bunch of templates. There is no code or editable info.

There were no other files added or modified.

# Make another change and publish with AWS: Sync SAM 

No new files.
All changes were added.

---
---
 
# PURGE SAM Files

1)	S3 > Buckets

	Empty and then Delete project buckets.
	Empty and then Delete “aws-sam-cli-managed-default” buckets.

2)	Cloud Formation > Stacks

	Delete project stack
	Delete “aws-sam-cli-managed-default” stack.

3)	Cloud Watch > Logs
	
	Delete ALL project Logs

4)	Event Bridge
	
Buses (none visible)
	Rules (none visible)

5)	API Gateway
	
There should be any Project Lambdas visible.
	If there are, review the Items above.

6)	Lambda

	There should be any Project Lambdas visible.
	If there are, review the Items above.
